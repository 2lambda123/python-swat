

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Workflows &mdash; SWAT 1.0.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
    <link rel="top" title="SWAT 1.0.0 documentation" href="index.html"/>
        <link rel="next" title="Binary vs. REST" href="binary-vs-rest.html"/>
        <link rel="prev" title="Getting Started" href="getting-started.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> SWAT
          

          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Workflows</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-easy-way">The Easy Way</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-response-and-result-callbacks">Using Response and Result Callbacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="#handling-multiple-actions-simultaneously">Handling Multiple Actions Simultaneously</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="binary-vs-rest.html">Binary vs. REST</a></li>
<li class="toctree-l1"><a class="reference internal" href="loading-data.html">Loading Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="table-vs-dataframe.html">CASTable vs. DataFrame vs. SASDataFrame</a></li>
<li class="toctree-l1"><a class="reference internal" href="indexing.html">Indexing and Data Selection</a></li>
<li class="toctree-l1"><a class="reference internal" href="bygroups.html">Handling By Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="sorting.html">Sorting</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="gotchas.html">Programming Gotchas</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="sas-tk.html">SAS TK</a></li>
<li class="toctree-l1"><a class="reference internal" href="licenses.html">Licenses</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">SWAT</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 







<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Workflows</li>
    <li class="wy-breadcrumbs-aside">
      
          
          <a href="_sources/workflows.txt" rel="nofollow"> View page source</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="workflows">
<h1>Workflows<a class="headerlink" href="#workflows" title="Permalink to this headline">¶</a></h1>
<p>The SWAT package includes the ability to call CAS actions and process the
output in various ways.  These range from simple (calling CAS actions as Python
methods and getting a dictionary of results back) to complex (invoking CAS
actions in multiple sessions and handling server responses from them directly).
The various workflows are described in the following sections to give you an idea
of how the classes in SWAT interact with each other.</p>
<div class="section" id="the-easy-way">
<h2>The Easy Way<a class="headerlink" href="#the-easy-way" title="Permalink to this headline">¶</a></h2>
<p>In the most basic form of calling CAS actions, the actions are called directly
on the connection object or a <code class="xref py py-class docutils literal"><span class="pre">CASTable</span></code> object.  When you load a CAS
action set (using <code class="docutils literal"><span class="pre">builtins.loadactionset</span></code>), the CAS actions in that action set
are added to the connection object as Python methods.  For example, when the
<code class="docutils literal"><span class="pre">simple</span></code> action set is loaded, the CAS connection object is extended with
methods for <code class="docutils literal"><span class="pre">summary</span></code>, <code class="docutils literal"><span class="pre">freq</span></code>, <code class="docutils literal"><span class="pre">crosstab</span></code>, etc.  These can then be called on
the CAS connection object directly.</p>
<p>In addition, any <code class="xref py py-class docutils literal"><span class="pre">CASTable</span></code> objects that are registered with that connection
also get methods for those actions.  When you call a CAS action on a <code class="xref py py-class docutils literal"><span class="pre">CASTable</span></code>
object, the <code class="docutils literal"><span class="pre">table=</span></code> (or <code class="docutils literal"><span class="pre">name=</span></code> and <code class="docutils literal"><span class="pre">caslib=</span></code> in some cases) parameter get populated
automatically with that table object before it is sent to the CAS server.</p>
<p>Here is a simple example.  We are reading a CSV file using the <code class="xref py py-meth docutils literal"><span class="pre">CAS.read_csv()</span></code>
method.  This loads the CSV data into a CAS table and returns a <code class="xref py py-class docutils literal"><span class="pre">CASTable</span></code>
object.  You can then use many of the standard <a class="reference external" href="http://pandas.pydata.org/pandas-docs/version/0.18.0/generated/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.18.0)"><code class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></code></a> methods
such as <a class="reference external" href="http://pandas.pydata.org/pandas-docs/version/0.18.0/generated/pandas.DataFrame.head.html#pandas.DataFrame.head" title="(in pandas v0.18.0)"><code class="xref py py-meth docutils literal"><span class="pre">pandas.DataFrame.head()</span></code></a> to interact with the CAS table on the server.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="kn">import</span> <span class="nn">swat</span>

<span class="gp">In [2]: </span><span class="n">conn</span> <span class="o">=</span> <span class="n">swat</span><span class="o">.</span><span class="n">CAS</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">userid</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>

<span class="gp">In [3]: </span><span class="n">tbl</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/&#39;</span>
<span class="gp">   ...: </span>                    <span class="s1">&#39;sassoftware/sas-viya-programming/master/data/cars.csv&#39;</span><span class="p">)</span>
<span class="gp">   ...: </span>

<span class="gp">In [4]: </span><span class="n">tbl</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="gh">Out[4]: </span><span class="go"></span>
<span class="go">Selected Rows from Table _T_D355F1FC_7F037A6500C0</span>

<span class="go">    Make           Model   Type Origin DriveTrain     MSRP  Invoice  \</span>
<span class="go">0  Acura             MDX    SUV   Asia        All  36945.0  33337.0   </span>
<span class="go">1  Acura  RSX Type S 2dr  Sedan   Asia      Front  23820.0  21761.0   </span>
<span class="go">2  Acura         TSX 4dr  Sedan   Asia      Front  26990.0  24647.0   </span>
<span class="go">3  Acura          TL 4dr  Sedan   Asia      Front  33195.0  30299.0   </span>
<span class="go">4  Acura      3.5 RL 4dr  Sedan   Asia      Front  43755.0  39014.0   </span>

<span class="go">   EngineSize  Cylinders  Horsepower  MPG_City  MPG_Highway  Weight  \</span>
<span class="go">0         3.5        6.0       265.0      17.0         23.0  4451.0   </span>
<span class="go">1         2.0        4.0       200.0      24.0         31.0  2778.0   </span>
<span class="go">2         2.4        4.0       200.0      22.0         29.0  3230.0   </span>
<span class="go">3         3.2        6.0       270.0      20.0         28.0  3575.0   </span>
<span class="go">4         3.5        6.0       225.0      18.0         24.0  3880.0   </span>

<span class="go">   Wheelbase  Length  </span>
<span class="go">0      106.0   189.0  </span>
<span class="go">1      101.0   172.0  </span>
<span class="go">2      105.0   183.0  </span>
<span class="go">3      108.0   186.0  </span>
<span class="go">4      115.0   197.0  </span>
</pre></div>
</div>
<p>You can call CAS actions directly on the <code class="xref py py-class docutils literal"><span class="pre">CAS</span></code> connection object and
pass in the table argument, or you can call the CAS action directly on the
<code class="xref py py-class docutils literal"><span class="pre">CASTable</span></code> object from <code class="xref py py-meth docutils literal"><span class="pre">CAS.read_csv()</span></code>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">conn</span><span class="o">.</span><span class="n">summary</span><span class="p">(</span><span class="n">table</span><span class="o">=</span><span class="n">tbl</span><span class="p">)</span>
<span class="gh">Out[5]: </span><span class="go"></span>
<span class="go">[Summary]</span>

<span class="go"> Descriptive Statistics for _T_D355F1FC_7F037A6500C0</span>
<span class="go"> </span>
<span class="go">         Column      Min       Max      N  NMiss          Mean         Sum  \</span>
<span class="go"> 0         MSRP  10280.0  192465.0  428.0    0.0  32774.855140  14027638.0   </span>
<span class="go"> 1      Invoice   9875.0  173560.0  428.0    0.0  30014.700935  12846292.0   </span>
<span class="go"> 2   EngineSize      1.3       8.3  428.0    0.0      3.196729      1368.2   </span>
<span class="go"> 3    Cylinders      3.0      12.0  426.0    2.0      5.807512      2474.0   </span>
<span class="go"> 4   Horsepower     73.0     500.0  428.0    0.0    215.885514     92399.0   </span>
<span class="go"> 5     MPG_City     10.0      60.0  428.0    0.0     20.060748      8586.0   </span>
<span class="go"> 6  MPG_Highway     12.0      66.0  428.0    0.0     26.843458     11489.0   </span>
<span class="go"> 7       Weight   1850.0    7190.0  428.0    0.0   3577.953271   1531364.0   </span>
<span class="go"> 8    Wheelbase     89.0     144.0  428.0    0.0    108.154206     46290.0   </span>
<span class="go"> 9       Length    143.0     238.0  428.0    0.0    186.362150     79763.0   </span>
<span class="go"> </span>
<span class="go">             Std      StdErr           Var           USS           CSS  \</span>
<span class="go"> 0  19431.716674  939.267478  3.775916e+08  6.209854e+11  1.612316e+11   </span>
<span class="go"> 1  17642.117750  852.763949  3.112443e+08  5.184789e+11  1.329013e+11   </span>
<span class="go"> 2      1.108595    0.053586  1.228982e+00  4.898540e+03  5.247754e+02   </span>
<span class="go"> 3      1.558443    0.075507  2.428743e+00  1.540000e+04  1.032216e+03   </span>
<span class="go"> 4     71.836032    3.472326  5.160415e+03  2.215110e+07  2.203497e+06   </span>
<span class="go"> 5      5.238218    0.253199  2.743892e+01  1.839580e+05  1.171642e+04   </span>
<span class="go"> 6      5.741201    0.277511  3.296139e+01  3.224790e+05  1.407451e+04   </span>
<span class="go"> 7    758.983215   36.686838  5.760555e+05  5.725125e+09  2.459757e+08   </span>
<span class="go"> 8      8.311813    0.401767  6.908624e+01  5.035958e+06  2.949982e+04   </span>
<span class="go"> 9     14.357991    0.694020  2.061519e+02  1.495283e+07  8.802687e+04   </span>
<span class="go"> </span>
<span class="go">           CV      TValue          ProbT  </span>
<span class="go"> 0  59.288490   34.894059  4.160412e-127  </span>
<span class="go"> 1  58.778256   35.196963  2.684398e-128  </span>
<span class="go"> 2  34.679034   59.656105  3.133745e-209  </span>
<span class="go"> 3  26.834946   76.913766  1.515569e-251  </span>
<span class="go"> 4  33.275059   62.173176  4.185344e-216  </span>
<span class="go"> 5  26.111777   79.229235  1.866284e-257  </span>
<span class="go"> 6  21.387709   96.729204  1.665621e-292  </span>
<span class="go"> 7  21.212776   97.526890  5.812547e-294  </span>
<span class="go"> 8   7.685150  269.196577   0.000000e+00  </span>
<span class="go"> 9   7.704349  268.525733   0.000000e+00  </span>

<span class="go">+ Elapsed: 0.0225s, user: 0.02s, sys: 0.005s, mem: 1.74mb</span>

<span class="gp">In [6]: </span><span class="n">tbl</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           Out[6]: </span>
<span class="go">[Summary]</span>

<span class="go"> Descriptive Statistics for _T_D355F1FC_7F037A6500C0</span>
<span class="go"> </span>
<span class="go">         Column      Min       Max      N  NMiss          Mean         Sum  \</span>
<span class="go"> 0         MSRP  10280.0  192465.0  428.0    0.0  32774.855140  14027638.0   </span>
<span class="go"> 1      Invoice   9875.0  173560.0  428.0    0.0  30014.700935  12846292.0   </span>
<span class="go"> 2   EngineSize      1.3       8.3  428.0    0.0      3.196729      1368.2   </span>
<span class="go"> 3    Cylinders      3.0      12.0  426.0    2.0      5.807512      2474.0   </span>
<span class="go"> 4   Horsepower     73.0     500.0  428.0    0.0    215.885514     92399.0   </span>
<span class="go"> 5     MPG_City     10.0      60.0  428.0    0.0     20.060748      8586.0   </span>
<span class="go"> 6  MPG_Highway     12.0      66.0  428.0    0.0     26.843458     11489.0   </span>
<span class="go"> 7       Weight   1850.0    7190.0  428.0    0.0   3577.953271   1531364.0   </span>
<span class="go"> 8    Wheelbase     89.0     144.0  428.0    0.0    108.154206     46290.0   </span>
<span class="go"> 9       Length    143.0     238.0  428.0    0.0    186.362150     79763.0   </span>
<span class="go"> </span>
<span class="go">             Std      StdErr           Var           USS           CSS  \</span>
<span class="go"> 0  19431.716674  939.267478  3.775916e+08  6.209854e+11  1.612316e+11   </span>
<span class="go"> 1  17642.117750  852.763949  3.112443e+08  5.184789e+11  1.329013e+11   </span>
<span class="go"> 2      1.108595    0.053586  1.228982e+00  4.898540e+03  5.247754e+02   </span>
<span class="go"> 3      1.558443    0.075507  2.428743e+00  1.540000e+04  1.032216e+03   </span>
<span class="go"> 4     71.836032    3.472326  5.160415e+03  2.215110e+07  2.203497e+06   </span>
<span class="go"> 5      5.238218    0.253199  2.743892e+01  1.839580e+05  1.171642e+04   </span>
<span class="go"> 6      5.741201    0.277511  3.296139e+01  3.224790e+05  1.407451e+04   </span>
<span class="go"> 7    758.983215   36.686838  5.760555e+05  5.725125e+09  2.459757e+08   </span>
<span class="go"> 8      8.311813    0.401767  6.908624e+01  5.035958e+06  2.949982e+04   </span>
<span class="go"> 9     14.357991    0.694020  2.061519e+02  1.495283e+07  8.802687e+04   </span>
<span class="go"> </span>
<span class="go">           CV      TValue          ProbT  </span>
<span class="go"> 0  59.288490   34.894059  4.160412e-127  </span>
<span class="go"> 1  58.778256   35.196963  2.684398e-128  </span>
<span class="go"> 2  34.679034   59.656105  3.133745e-209  </span>
<span class="go"> 3  26.834946   76.913766  1.515569e-251  </span>
<span class="go"> 4  33.275059   62.173176  4.185344e-216  </span>
<span class="go"> 5  26.111777   79.229235  1.866284e-257  </span>
<span class="go"> 6  21.387709   96.729204  1.665621e-292  </span>
<span class="go"> 7  21.212776   97.526890  5.812547e-294  </span>
<span class="go"> 8   7.685150  269.196577   0.000000e+00  </span>
<span class="go"> 9   7.704349  268.525733   0.000000e+00  </span>

<span class="go">+ Elapsed: 0.00512s, user: 0.004s, sys: 0.003s, mem: 1.74mb</span>

<span class="gp">In [7]: </span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>The output from the CAS action methods is always a <code class="xref py py-class docutils literal"><span class="pre">CASResults</span></code> object.
This is simply an ordered Python dictionary with a few extra attributes and
methods added.  You can see the keys printed in the output above (surround by
square brackets).  This output only contains a single key: <strong>Summary</strong>.</p>
<p>Here is a diagram showing the process of calling and action and consuming
the responses into the <code class="xref py py-class docutils literal"><span class="pre">CASResults</span></code> object.</p>
<img alt="_images/easyway-workflow.png" src="_images/easyway-workflow.png" />
</div>
<div class="section" id="using-response-and-result-callbacks">
<h2>Using Response and Result Callbacks<a class="headerlink" href="#using-response-and-result-callbacks" title="Permalink to this headline">¶</a></h2>
<p>The next workflow is to use callback functions to handle either the responses
from the CAS server, or the individual result keys in the responses.  You
still use the CAS action methods on the <code class="xref py py-class docutils literal"><span class="pre">CAS</span></code> connection object, but this
time you add either a <code class="docutils literal"><span class="pre">responsefunc=</span></code> or <code class="docutils literal"><span class="pre">resultfunc=</span></code> function argument.</p>
<p>The result callback function takes five arguments: <code class="docutils literal"><span class="pre">key</span></code>, <code class="docutils literal"><span class="pre">value</span></code>, <code class="docutils literal"><span class="pre">response</span></code>,
<code class="docutils literal"><span class="pre">connection</span></code>, and <code class="docutils literal"><span class="pre">userdata</span></code>.  Those are the result key and value, the response the result
belongs to, the connection that the result belongs to, and an arbitrary user data
structure.</p>
<p>The response callback just takes three arguments for the response, connection,
and user data structure.</p>
<p>The result callback and response callback are called for each result and response,
respectively.  Keep in mind that you can only specify one or the other (a
response callback would override a result callback).  If you want to keep any sort
of state information between calls, you can store it in the <code class="docutils literal"><span class="pre">userdata</span></code> argument
and return it.  The returned value will get passed in as the <code class="docutils literal"><span class="pre">userdata</span></code> argument
on the next call.</p>
<p>Here is an example demonstrating both styles of callbacks.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [8]: </span><span class="kn">import</span> <span class="nn">swat</span>

<span class="gp">In [9]: </span><span class="n">conn</span> <span class="o">=</span> <span class="n">swat</span><span class="o">.</span><span class="n">CAS</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">userid</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>

<span class="gp">In [10]: </span><span class="n">tbl</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/&#39;</span>
<span class="gp">   ....: </span>                    <span class="s1">&#39;sassoftware/sas-viya-programming/master/data/cars.csv&#39;</span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [11]: </span><span class="n">tbl</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="gh">Out[11]: </span><span class="go"></span>
<span class="go">Selected Rows from Table _T_D355F5A9_7F571F3DA0C0</span>

<span class="go">    Make           Model   Type Origin DriveTrain     MSRP  Invoice  \</span>
<span class="go">0  Acura             MDX    SUV   Asia        All  36945.0  33337.0   </span>
<span class="go">1  Acura  RSX Type S 2dr  Sedan   Asia      Front  23820.0  21761.0   </span>
<span class="go">2  Acura         TSX 4dr  Sedan   Asia      Front  26990.0  24647.0   </span>
<span class="go">3  Acura          TL 4dr  Sedan   Asia      Front  33195.0  30299.0   </span>
<span class="go">4  Acura      3.5 RL 4dr  Sedan   Asia      Front  43755.0  39014.0   </span>

<span class="go">   EngineSize  Cylinders  Horsepower  MPG_City  MPG_Highway  Weight  \</span>
<span class="go">0         3.5        6.0       265.0      17.0         23.0  4451.0   </span>
<span class="go">1         2.0        4.0       200.0      24.0         31.0  2778.0   </span>
<span class="go">2         2.4        4.0       200.0      22.0         29.0  3230.0   </span>
<span class="go">3         3.2        6.0       270.0      20.0         28.0  3575.0   </span>
<span class="go">4         3.5        6.0       225.0      18.0         24.0  3880.0   </span>

<span class="go">   Wheelbase  Length  </span>
<span class="go">0      106.0   189.0  </span>
<span class="go">1      101.0   172.0  </span>
<span class="go">2      105.0   183.0  </span>
<span class="go">3      108.0   186.0  </span>
<span class="go">4      115.0   197.0  </span>

<span class="gp">In [12]: </span><span class="k">def</span> <span class="nf">result_cb</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="n">userdata</span><span class="p">):</span>
<span class="gp">   ....: </span>    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;&gt;&gt;&gt; RESULT&#39;</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
<span class="gp">   ....: </span>    <span class="k">return</span> <span class="n">userdata</span>
<span class="gp">   ....: </span>

<span class="gp">In [13]: </span><span class="n">tbl</span><span class="o">.</span><span class="n">summary</span><span class="p">(</span><span class="n">resultfunc</span><span class="o">=</span><span class="n">result_cb</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt; RESULT Summary Descriptive Statistics for _T_D355F5A9_7F571F3DA0C0</span>

<span class="go">        Column      Min       Max      N  NMiss          Mean         Sum  \</span>
<span class="go">0         MSRP  10280.0  192465.0  428.0    0.0  32774.855140  14027638.0   </span>
<span class="go">1      Invoice   9875.0  173560.0  428.0    0.0  30014.700935  12846292.0   </span>
<span class="go">2   EngineSize      1.3       8.3  428.0    0.0      3.196729      1368.2   </span>
<span class="go">3    Cylinders      3.0      12.0  426.0    2.0      5.807512      2474.0   </span>
<span class="go">4   Horsepower     73.0     500.0  428.0    0.0    215.885514     92399.0   </span>
<span class="go">5     MPG_City     10.0      60.0  428.0    0.0     20.060748      8586.0   </span>
<span class="go">6  MPG_Highway     12.0      66.0  428.0    0.0     26.843458     11489.0   </span>
<span class="go">7       Weight   1850.0    7190.0  428.0    0.0   3577.953271   1531364.0   </span>
<span class="go">8    Wheelbase     89.0     144.0  428.0    0.0    108.154206     46290.0   </span>
<span class="go">9       Length    143.0     238.0  428.0    0.0    186.362150     79763.0   </span>

<span class="go">            Std      StdErr           Var           USS           CSS  \</span>
<span class="go">0  19431.716674  939.267478  3.775916e+08  6.209854e+11  1.612316e+11   </span>
<span class="go">1  17642.117750  852.763949  3.112443e+08  5.184789e+11  1.329013e+11   </span>
<span class="go">2      1.108595    0.053586  1.228982e+00  4.898540e+03  5.247754e+02   </span>
<span class="go">3      1.558443    0.075507  2.428743e+00  1.540000e+04  1.032216e+03   </span>
<span class="go">4     71.836032    3.472326  5.160415e+03  2.215110e+07  2.203497e+06   </span>
<span class="go">5      5.238218    0.253199  2.743892e+01  1.839580e+05  1.171642e+04   </span>
<span class="go">6      5.741201    0.277511  3.296139e+01  3.224790e+05  1.407451e+04   </span>
<span class="go">7    758.983215   36.686838  5.760555e+05  5.725125e+09  2.459757e+08   </span>
<span class="go">8      8.311813    0.401767  6.908624e+01  5.035958e+06  2.949982e+04   </span>
<span class="go">9     14.357991    0.694020  2.061519e+02  1.495283e+07  8.802687e+04   </span>

<span class="go">          CV      TValue          ProbT  </span>
<span class="go">0  59.288490   34.894059  4.160412e-127  </span>
<span class="go">1  58.778256   35.196963  2.684398e-128  </span>
<span class="go">2  34.679034   59.656105  3.133745e-209  </span>
<span class="go">3  26.834946   76.913766  1.515569e-251  </span>
<span class="go">4  33.275059   62.173176  4.185344e-216  </span>
<span class="go">5  26.111777   79.229235  1.866284e-257  </span>
<span class="go">6  21.387709   96.729204  1.665621e-292  </span>
<span class="go">7  21.212776   97.526890  5.812547e-294  </span>
<span class="go">8   7.685150  269.196577   0.000000e+00  </span>
<span class="go">9   7.704349  268.525733   0.000000e+00  </span>

<span class="gp">In [14]: </span><span class="k">def</span> <span class="nf">response_cb</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="n">userdata</span><span class="p">):</span>
<span class="gp">   ....: </span>    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">response</span><span class="p">:</span>
<span class="gp">   ....: </span>        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;&gt;&gt;&gt; RESPONSE&#39;</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
<span class="gp">   ....: </span>    <span class="k">return</span> <span class="n">userdata</span>
<span class="gp">   ....: </span>

<span class="gp">In [15]: </span><span class="n">tbl</span><span class="o">.</span><span class="n">summary</span><span class="p">(</span><span class="n">responsefunc</span><span class="o">=</span><span class="n">response_cb</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt; RESPONSE Summary Descriptive Statistics for _T_D355F5A9_7F571F3DA0C0</span>

<span class="go">        Column      Min       Max      N  NMiss          Mean         Sum  \</span>
<span class="go">0         MSRP  10280.0  192465.0  428.0    0.0  32774.855140  14027638.0   </span>
<span class="go">1      Invoice   9875.0  173560.0  428.0    0.0  30014.700935  12846292.0   </span>
<span class="go">2   EngineSize      1.3       8.3  428.0    0.0      3.196729      1368.2   </span>
<span class="go">3    Cylinders      3.0      12.0  426.0    2.0      5.807512      2474.0   </span>
<span class="go">4   Horsepower     73.0     500.0  428.0    0.0    215.885514     92399.0   </span>
<span class="go">5     MPG_City     10.0      60.0  428.0    0.0     20.060748      8586.0   </span>
<span class="go">6  MPG_Highway     12.0      66.0  428.0    0.0     26.843458     11489.0   </span>
<span class="go">7       Weight   1850.0    7190.0  428.0    0.0   3577.953271   1531364.0   </span>
<span class="go">8    Wheelbase     89.0     144.0  428.0    0.0    108.154206     46290.0   </span>
<span class="go">9       Length    143.0     238.0  428.0    0.0    186.362150     79763.0   </span>

<span class="go">            Std      StdErr           Var           USS           CSS  \</span>
<span class="go">0  19431.716674  939.267478  3.775916e+08  6.209854e+11  1.612316e+11   </span>
<span class="go">1  17642.117750  852.763949  3.112443e+08  5.184789e+11  1.329013e+11   </span>
<span class="go">2      1.108595    0.053586  1.228982e+00  4.898540e+03  5.247754e+02   </span>
<span class="go">3      1.558443    0.075507  2.428743e+00  1.540000e+04  1.032216e+03   </span>
<span class="go">4     71.836032    3.472326  5.160415e+03  2.215110e+07  2.203497e+06   </span>
<span class="go">5      5.238218    0.253199  2.743892e+01  1.839580e+05  1.171642e+04   </span>
<span class="go">6      5.741201    0.277511  3.296139e+01  3.224790e+05  1.407451e+04   </span>
<span class="go">7    758.983215   36.686838  5.760555e+05  5.725125e+09  2.459757e+08   </span>
<span class="go">8      8.311813    0.401767  6.908624e+01  5.035958e+06  2.949982e+04   </span>
<span class="go">9     14.357991    0.694020  2.061519e+02  1.495283e+07  8.802687e+04   </span>

<span class="go">          CV      TValue          ProbT  </span>
<span class="go">0  59.288490   34.894059  4.160412e-127  </span>
<span class="go">1  58.778256   35.196963  2.684398e-128  </span>
<span class="go">2  34.679034   59.656105  3.133745e-209  </span>
<span class="go">3  26.834946   76.913766  1.515569e-251  </span>
<span class="go">4  33.275059   62.173176  4.185344e-216  </span>
<span class="go">5  26.111777   79.229235  1.866284e-257  </span>
<span class="go">6  21.387709   96.729204  1.665621e-292  </span>
<span class="go">7  21.212776   97.526890  5.812547e-294  </span>
<span class="go">8   7.685150  269.196577   0.000000e+00  </span>
<span class="go">9   7.704349  268.525733   0.000000e+00  </span>

<span class="gp">In [16]: </span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>Here is the flow diagram for using callbacks.  Note that only the result <strong>or</strong>
response callback is called.  It will not call both.</p>
<img alt="_images/callbacks-workflow.png" src="_images/callbacks-workflow.png" />
</div>
<div class="section" id="handling-multiple-actions-simultaneously">
<h2>Handling Multiple Actions Simultaneously<a class="headerlink" href="#handling-multiple-actions-simultaneously" title="Permalink to this headline">¶</a></h2>
<p>The final workflow is the most hands-on, but also offers the most flexibility.
For most cases, you can use the callback form to handle any size of data coming
back from the CAS server.  However, in that mode, you can only run one action
at a time.  If you want to run simultaneous actions and handle the responses
as they come back from either connection, you need to use the <code class="xref py py-meth docutils literal"><span class="pre">CAS.inovke()</span></code>
method.</p>
<p>The <code class="xref py py-meth docutils literal"><span class="pre">CAS.inovke()</span></code> method calls a CAS action, but doesn&#8217;t automatically retrieve
the responses.  You must iterate over the connection object to get the responses.
To iterate over the responses for multiple connections, you can use the
<code class="xref py py-func docutils literal"><span class="pre">getnext()</span></code> function.  Using this technique, you can take advantage of
running multiple CAS actions simultaneously while still just running in a single
thread on the client.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [17]: </span><span class="kn">import</span> <span class="nn">swat</span>

<span class="gp">In [18]: </span><span class="n">conn1</span> <span class="o">=</span> <span class="n">swat</span><span class="o">.</span><span class="n">CAS</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">userid</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>

<span class="gp">In [19]: </span><span class="n">conn2</span> <span class="o">=</span> <span class="n">swat</span><span class="o">.</span><span class="n">CAS</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">userid</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>

<span class="gp">In [20]: </span><span class="n">tbl1</span> <span class="o">=</span> <span class="n">conn1</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/&#39;</span>
<span class="gp">   ....: </span>                      <span class="s1">&#39;sassoftware/sas-viya-programming/master/data/class.csv&#39;</span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [21]: </span><span class="n">tbl1</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="gh">Out[21]: </span><span class="go"></span>
<span class="go">Selected Rows from Table _T_D355FA19_7F8CD42200C0</span>

<span class="go">      Name Sex  Age  Height  Weight</span>
<span class="go">0   Alfred   M   14    69.0   112.5</span>
<span class="go">1    Alice   F   13    56.5    84.0</span>
<span class="go">2  Barbara   F   13    65.3    98.0</span>
<span class="go">3    Carol   F   14    62.8   102.5</span>
<span class="go">4    Henry   M   14    63.5   102.5</span>

<span class="gp">In [22]: </span><span class="n">tbl2</span> <span class="o">=</span> <span class="n">conn2</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/&#39;</span>
<span class="gp">   ....: </span>                      <span class="s1">&#39;sassoftware/sas-viya-programming/master/data/cars.csv&#39;</span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [23]: </span><span class="n">tbl2</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="gh">Out[23]: </span><span class="go"></span>
<span class="go">Selected Rows from Table _T_D355FB7D_7F2148BA60C0</span>

<span class="go">    Make           Model   Type Origin DriveTrain     MSRP  Invoice  \</span>
<span class="go">0  Acura             MDX    SUV   Asia        All  36945.0  33337.0   </span>
<span class="go">1  Acura  RSX Type S 2dr  Sedan   Asia      Front  23820.0  21761.0   </span>
<span class="go">2  Acura         TSX 4dr  Sedan   Asia      Front  26990.0  24647.0   </span>
<span class="go">3  Acura          TL 4dr  Sedan   Asia      Front  33195.0  30299.0   </span>
<span class="go">4  Acura      3.5 RL 4dr  Sedan   Asia      Front  43755.0  39014.0   </span>

<span class="go">   EngineSize  Cylinders  Horsepower  MPG_City  MPG_Highway  Weight  \</span>
<span class="go">0         3.5        6.0       265.0      17.0         23.0  4451.0   </span>
<span class="go">1         2.0        4.0       200.0      24.0         31.0  2778.0   </span>
<span class="go">2         2.4        4.0       200.0      22.0         29.0  3230.0   </span>
<span class="go">3         3.2        6.0       270.0      20.0         28.0  3575.0   </span>
<span class="go">4         3.5        6.0       225.0      18.0         24.0  3880.0   </span>

<span class="go">   Wheelbase  Length  </span>
<span class="go">0      106.0   189.0  </span>
<span class="go">1      101.0   172.0  </span>
<span class="go">2      105.0   183.0  </span>
<span class="go">3      108.0   186.0  </span>
<span class="go">4      115.0   197.0  </span>
</pre></div>
</div>
<p>Now that we have the tables loaded, we can invoke the <code class="docutils literal"><span class="pre">summary</span></code> action on each
one and retrieve the responses from both connections.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [24]: </span><span class="n">tbl1</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="s1">&#39;summary&#39;</span><span class="p">);</span>

<span class="gp">In [25]: </span><span class="n">tbl2</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="s1">&#39;summary&#39;</span><span class="p">);</span>

<span class="gp">In [26]: </span><span class="k">for</span> <span class="n">resp</span><span class="p">,</span> <span class="n">conn</span> <span class="ow">in</span> <span class="n">swat</span><span class="o">.</span><span class="n">getnext</span><span class="p">(</span><span class="n">conn1</span><span class="p">,</span> <span class="n">conn2</span><span class="p">):</span>
<span class="gp">   ....: </span>    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">resp</span><span class="p">:</span>
<span class="gp">   ....: </span>        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;&gt;&gt;&gt; RESULT&#39;</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
<span class="gp">   ....: </span>
<span class="go">&gt;&gt;&gt; RESULT Summary Descriptive Statistics for _T_D355FA19_7F8CD42200C0</span>

<span class="go">   Column   Min    Max     N  NMiss        Mean     Sum        Std    StdErr  \</span>
<span class="go">0     Age  11.0   16.0  19.0    0.0   13.315789   253.0   1.492672  0.342442   </span>
<span class="go">1  Height  51.3   72.0  19.0    0.0   62.336842  1184.4   5.127075  1.176232   </span>
<span class="go">2  Weight  50.5  150.0  19.0    0.0  100.026316  1900.5  22.773933  5.224699   </span>

<span class="go">          Var        USS          CSS         CV     TValue         ProbT  </span>
<span class="go">0    2.228070    3409.00    40.105263  11.209791  38.884748  8.049260e-19  </span>
<span class="go">1   26.286901   74304.92   473.164211   8.224791  52.997076  3.202374e-21  </span>
<span class="go">2  518.652047  199435.75  9335.736842  22.767942  19.144897  2.045197e-13  </span>
<span class="go">&gt;&gt;&gt; RESULT Summary Descriptive Statistics for _T_D355FB7D_7F2148BA60C0</span>

<span class="go">        Column      Min       Max      N  NMiss          Mean         Sum  \</span>
<span class="go">0         MSRP  10280.0  192465.0  428.0    0.0  32774.855140  14027638.0   </span>
<span class="go">1      Invoice   9875.0  173560.0  428.0    0.0  30014.700935  12846292.0   </span>
<span class="go">2   EngineSize      1.3       8.3  428.0    0.0      3.196729      1368.2   </span>
<span class="go">3    Cylinders      3.0      12.0  426.0    2.0      5.807512      2474.0   </span>
<span class="go">4   Horsepower     73.0     500.0  428.0    0.0    215.885514     92399.0   </span>
<span class="go">5     MPG_City     10.0      60.0  428.0    0.0     20.060748      8586.0   </span>
<span class="go">6  MPG_Highway     12.0      66.0  428.0    0.0     26.843458     11489.0   </span>
<span class="go">7       Weight   1850.0    7190.0  428.0    0.0   3577.953271   1531364.0   </span>
<span class="go">8    Wheelbase     89.0     144.0  428.0    0.0    108.154206     46290.0   </span>
<span class="go">9       Length    143.0     238.0  428.0    0.0    186.362150     79763.0   </span>

<span class="go">            Std      StdErr           Var           USS           CSS  \</span>
<span class="go">0  19431.716674  939.267478  3.775916e+08  6.209854e+11  1.612316e+11   </span>
<span class="go">1  17642.117750  852.763949  3.112443e+08  5.184789e+11  1.329013e+11   </span>
<span class="go">2      1.108595    0.053586  1.228982e+00  4.898540e+03  5.247754e+02   </span>
<span class="go">3      1.558443    0.075507  2.428743e+00  1.540000e+04  1.032216e+03   </span>
<span class="go">4     71.836032    3.472326  5.160415e+03  2.215110e+07  2.203497e+06   </span>
<span class="go">5      5.238218    0.253199  2.743892e+01  1.839580e+05  1.171642e+04   </span>
<span class="go">6      5.741201    0.277511  3.296139e+01  3.224790e+05  1.407451e+04   </span>
<span class="go">7    758.983215   36.686838  5.760555e+05  5.725125e+09  2.459757e+08   </span>
<span class="go">8      8.311813    0.401767  6.908624e+01  5.035958e+06  2.949982e+04   </span>
<span class="go">9     14.357991    0.694020  2.061519e+02  1.495283e+07  8.802687e+04   </span>

<span class="go">          CV      TValue          ProbT  </span>
<span class="go">0  59.288490   34.894059  4.160412e-127  </span>
<span class="go">1  58.778256   35.196963  2.684398e-128  </span>
<span class="go">2  34.679034   59.656105  3.133745e-209  </span>
<span class="go">3  26.834946   76.913766  1.515569e-251  </span>
<span class="go">4  33.275059   62.173176  4.185344e-216  </span>
<span class="go">5  26.111777   79.229235  1.866284e-257  </span>
<span class="go">6  21.387709   96.729204  1.665621e-292  </span>
<span class="go">7  21.212776   97.526890  5.812547e-294  </span>
<span class="go">8   7.685150  269.196577   0.000000e+00  </span>
<span class="go">9   7.704349  268.525733   0.000000e+00  </span>

<span class="gp">In [27]: </span><span class="n">conn1</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="gp">In [28]: </span><span class="n">conn2</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>The flow diagram for handling multiple connections simultaneously is shown below.</p>
<img alt="_images/simultaneous-workflow.png" src="_images/simultaneous-workflow.png" />
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="binary-vs-rest.html" class="btn btn-neutral float-right" title="Binary vs. REST" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="getting-started.html" class="btn btn-neutral" title="Getting Started" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016 SAS Institute Inc. All Rights Reserved..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>